"use strict";
var mongoose = require("mongoose");
var CostControllException = require("../../../../applicationProject/exception/CostControllException");
var RepositoryBase = (function () {
    function RepositoryBase(schemaModel) {
        this._model = schemaModel;
    }
    RepositoryBase.prototype.create = function (item, callback) {
        this._model.create(item, function (error, result) {
            if (error) {
                callback(new CostControllException('Create Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.retrieve = function (field, callback) {
        this._model.find(field, function (error, result) {
            if (error) {
                callback(new CostControllException('retrieve Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.retrieveWithProjection = function (field, projection, callback) {
        this._model.find(field, projection, function (error, result) {
            if (error) {
                callback(new CostControllException('retrieve Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.update = function (_id, item, callback) {
        this._model.update({ _id: _id }, item, function (error, result) {
            if (error) {
                callback(new CostControllException('update Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.delete = function (_id, callback) {
        this._model.remove({ _id: this.toObjectId(_id) }, function (error) {
            if (error) {
                callback(new CostControllException('Delete Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, 'Done.');
            }
        });
    };
    RepositoryBase.prototype.findById = function (_id, callback) {
        this._model.findById(_id, function (error, result) {
            if (error) {
                callback(new CostControllException('findById Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.toObjectId = function (_id) {
        return mongoose.Types.ObjectId.createFromHexString(_id);
    };
    RepositoryBase.prototype.findAndPopulate = function (searchField, populateField, callback) {
        this._model.find(searchField).populate(populateField).exec(function (error, result) {
            if (error) {
                callback(new CostControllException('findAndPopulate Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.findOneAndUpdate = function (query, newData, options, callback) {
        this._model.findOneAndUpdate(query, newData, options, function (error, result) {
            if (error) {
                callback(new CostControllException('findAndUpdate Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.insertMany = function (data, callback) {
        console.log('Inserting into base repo : ' + JSON.stringify(data));
        this._model.insertMany(data, function (error, result) {
            if (error) {
                callback(new CostControllException('InsertMany Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.aggregate = function (field, callback) {
        this._model.aggregate(field).exec(function (error, result) {
            if (error) {
                callback(new CostControllException('aggregate Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    RepositoryBase.prototype.findByIdWithProjection = function (_id, projection, callback) {
        this._model.findById(_id, projection).exec(function (error, result) {
            if (error) {
                callback(new CostControllException('retrieveByProjection Failed. ' + error.message, error, 500), null);
            }
            else {
                callback(null, result);
            }
        });
    };
    return RepositoryBase;
}());
module.exports = RepositoryBase;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9mcmFtZXdvcmsvZGF0YWFjY2Vzcy9yZXBvc2l0b3J5L2Jhc2UvcmVwb3NpdG9yeS5iYXNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFQSxtQ0FBc0M7QUFDdEMsc0dBQXlHO0FBRXpHO0lBSUUsd0JBQVksV0FBOEM7UUFDeEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUM7SUFDNUIsQ0FBQztJQUVELCtCQUFNLEdBQU4sVUFBUSxJQUFPLEVBQUUsUUFBMkM7UUFDMUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQUMsS0FBWSxFQUFFLE1BQVM7WUFDL0MsRUFBRSxDQUFBLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDVCxRQUFRLENBQUMsSUFBSSxxQkFBcUIsQ0FBQyxpQkFBaUIsR0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN6RixDQUFDO1lBQUEsSUFBSSxDQUFDLENBQUM7Z0JBQ0wsUUFBUSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztZQUN6QixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFTCxDQUFDO0lBRUQsaUNBQVEsR0FBUixVQUFVLEtBQVMsRUFBRSxRQUEyQztRQUM5RCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsVUFBQyxLQUFZLEVBQUUsTUFBUztZQUM5QyxFQUFFLENBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNULFFBQVEsQ0FBQyxJQUFJLHFCQUFxQixDQUFDLG1CQUFtQixHQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzNGLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDTixRQUFRLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ3pCLENBQUM7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QUksQ0FBQyxDQUFDO1lBQ3ZHLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDTixRQUFRLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ3pCLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFrSkgscUJBQUM7QUFBRCxDQTlRQSxBQThRQyxJQUFBO0FBRUQsaUJBQVMsY0FBYyxDQUFDIiwiZmlsZSI6ImFwcC9mcmFtZXdvcmsvZGF0YWFjY2Vzcy9yZXBvc2l0b3J5L2Jhc2UvcmVwb3NpdG9yeS5iYXNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IElSZWFkID0gcmVxdWlyZSgnLi9yZWFkJyk7XG5pbXBvcnQgSVdyaXRlID0gcmVxdWlyZSgnLi93cml0ZScpO1xuaW1wb3J0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmltcG9ydCBDb3N0Q29udHJvbGxFeGNlcHRpb24gPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9hcHBsaWNhdGlvblByb2plY3QvZXhjZXB0aW9uL0Nvc3RDb250cm9sbEV4Y2VwdGlvbicpO1xuXG5jbGFzcyBSZXBvc2l0b3J5QmFzZTxUIGV4dGVuZHMgbW9uZ29vc2UuRG9jdW1lbnQ+IGltcGxlbWVudHMgSVJlYWQ8VD4sIElXcml0ZTxUPiB7XG5cbiAgcHJpdmF0ZSBfbW9kZWw6IG1vbmdvb3NlLk1vZGVsPG1vbmdvb3NlLkRvY3VtZW50PjtcblxuICBjb25zdHJ1Y3RvcihzY2hlbWFNb2RlbDogbW9uZ29vc2UuTW9kZWw8bW9uZ29vc2UuRG9jdW1lbnQ+KSB7XG4gICAgdGhpcy5fbW9kZWwgPSBzY2hlbWFNb2RlbDtcbiAgfVxuXG4gIGNyZWF0ZSAoaXRlbTogVCwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmNyZWF0ZShpdGVtLCAoZXJyb3IgOkVycm9yLCByZXN1bHQ6IFQpID0+IHtcbiAgICAgIGlmKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKG5ldyBDb3N0Q29udHJvbGxFeGNlcHRpb24oJ0NyZWF0ZSBGYWlsZWQuICcrZXJyb3IubWVzc2FnZSwgZXJyb3IsIDUwMCksIG51bGwpO1xuICAgICAgfWVsc2Uge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH1cblxuICByZXRyaWV2ZSAoZmllbGQ6YW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChmaWVsZCwgKGVycm9yIDpFcnJvciwgcmVzdWx0OiBUKSA9PiB7XG4gICAgICBpZihlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhuZXcgQ29zdENvbnRyb2xsRXhjZXB0aW9uKCdyZXRyaWV2ZSBGYWlsZWQuICcrZXJyb3IubWVzc2FnZSwgZXJyb3IsIDUwMCksIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZXRyaWV2ZVdpdGhQcm9qZWN0aW9uIChmaWVsZDphbnkscHJvamVjdGlvbjphbnksIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9tb2RlbC5maW5kKGZpZWxkLCBwcm9qZWN0aW9uLChlcnJvciA6RXJyb3IsIHJlc3VsdDogVCkgPT4ge1xuICAgICAgaWYoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2sobmV3IENvc3RDb250cm9sbEV4Y2VwdGlvbigncmV0cmlldmUgRmFpbGVkLiAnK2Vycm9yLm1lc3NhZ2UsIGVycm9yLCA1MDApLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGUgKF9pZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQsIGl0ZW06IFQsIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9tb2RlbC51cGRhdGUoe19pZDogX2lkfSwgaXRlbSwgKGVycm9yIDpFcnJvciwgcmVzdWx0OiBUKSA9PiB7XG4gICAgICBpZihlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhuZXcgQ29zdENvbnRyb2xsRXhjZXB0aW9uKCd1cGRhdGUgRmFpbGVkLiAnK2Vycm9yLm1lc3NhZ2UsIGVycm9yLCA1MDApLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfVxuXG4gIGRlbGV0ZSAoX2lkOiBzdHJpbmcsIGNhbGxiYWNrOihlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLnJlbW92ZSh7X2lkOiB0aGlzLnRvT2JqZWN0SWQoX2lkKX0sIChlcnJvciA6RXJyb3IpID0+IHtcbiAgICAgIGlmKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKG5ldyBDb3N0Q29udHJvbGxFeGNlcHRpb24oJ0RlbGV0ZSBGYWlsZWQuICcrZXJyb3IubWVzc2FnZSwgZXJyb3IsIDUwMCksIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgJ0RvbmUuJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfVxuXG4gIGZpbmRCeUlkIChfaWQ6IHN0cmluZywgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IFQpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9tb2RlbC5maW5kQnlJZCggX2lkLCAoZXJyb3IgOkVycm9yLCByZXN1bHQ6IFQpID0+IHtcbiAgICAgIGlmKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKG5ldyBDb3N0Q29udHJvbGxFeGNlcHRpb24oJ2ZpbmRCeUlkIEZhaWxlZC4gJytlcnJvci5tZXNzYWdlLCBlcnJvciwgNTAwKSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cblxuICB0b09iamVjdElkIChfaWQ6IHN0cmluZykgOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZCB7XG4gICAgcmV0dXJuIG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLmNyZWF0ZUZyb21IZXhTdHJpbmcoX2lkKTtcbiAgfVxuXG4gIGZpbmRBbmRQb3B1bGF0ZShzZWFyY2hGaWVsZDogYW55LCBwb3B1bGF0ZUZpZWxkIDphbnksIGNhbGxiYWNrOihlcnI6IGFueSwgcmVzdWx0OiBhbnkpPT52b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChzZWFyY2hGaWVsZCkucG9wdWxhdGUocG9wdWxhdGVGaWVsZCkuZXhlYygoZXJyb3IgOkVycm9yLCByZXN1bHQ6IFQpID0+IHtcbiAgICAgIGlmKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKG5ldyBDb3N0Q29udHJvbGxFeGNlcHRpb24oJ2ZpbmRBbmRQb3B1bGF0ZSBGYWlsZWQuICcrZXJyb3IubWVzc2FnZSwgZXJyb3IsIDUwMCksIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZpbmRPbmVBbmRVcGRhdGUocXVlcnk6IGFueSwgbmV3RGF0YTogYW55LCBvcHRpb25zOiBhbnksIGNhbGxiYWNrOihlcnI6IGFueSwgcmVzdWx0OiBhbnkpPT52b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZE9uZUFuZFVwZGF0ZShxdWVyeSwgbmV3RGF0YSwgb3B0aW9ucywgKGVycm9yIDpFcnJvciwgcmVzdWx0OiBUKSA9PiB7XG4gICAgICBpZihlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhuZXcgQ29zdENvbnRyb2xsRXhjZXB0aW9uKCdmaW5kQW5kVXBkYXRlIEZhaWxlZC4gJytlcnJvci5tZXNzYWdlLCBlcnJvciwgNTAwKSwgbnVsbCk7XG4gICAgICB9ZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpbnNlcnRNYW55KGRhdGE6IGFueSwgY2FsbGJhY2s6KGVycjogYW55LCByZXN1bHQgOiBhbnkpPT4gdm9pZCkge1xuICAgIGNvbnNvbGUubG9nKCdJbnNlcnRpbmcgaW50byBiYXNlIHJlcG8gOiAnK0pTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICB0aGlzLl9tb2RlbC5pbnNlcnRNYW55KGRhdGEsIChlcnJvciA6RXJyb3IsIHJlc3VsdDogVCkgPT4ge1xuICAgICAgaWYoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2sobmV3IENvc3RDb250cm9sbEV4Y2VwdGlvbignSW5zZXJ0TWFueSBGYWlsZWQuICcrZXJyb3IubWVzc2FnZSwgZXJyb3IsIDUwMCksIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFnZ3JlZ2F0ZShmaWVsZCA6YW55LCBjYWxsYmFjazogKGVycm9yOmFueSwgcmVzdWx0IDogYW55KT0+IHZvaWQgKSB7XG4gICAgdGhpcy5fbW9kZWwuYWdncmVnYXRlKCBmaWVsZCkuZXhlYygoZXJyb3IsIHJlc3VsdCkgPT4ge1xuICAgICAgaWYoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2sobmV3IENvc3RDb250cm9sbEV4Y2VwdGlvbignYWdncmVnYXRlIEZhaWxlZC4gJytlcnJvci5tZXNzYWdlLCBlcnJvciwgNTAwKSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZmluZEJ5SWRXaXRoUHJvamVjdGlvbihfaWQ6IHN0cmluZywgcHJvamVjdGlvbjogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZEJ5SWQoX2lkLCBwcm9qZWN0aW9uKS5leGVjKChlcnJvciwgcmVzdWx0OlQpPT4ge1xuICAgICAgaWYoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2sobmV3IENvc3RDb250cm9sbEV4Y2VwdGlvbigncmV0cmlldmVCeVByb2plY3Rpb24gRmFpbGVkLiAnK2Vycm9yLm1lc3NhZ2UsIGVycm9yLCA1MDApLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLypjcmVhdGUoaXRlbTogVCwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmNyZWF0ZShpdGVtLCBjYWxsYmFjayk7XG4gIH1cblxuICByZXRyaWV2ZShmaWVsZDogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChmaWVsZCwge30pLmxlYW4oKS5leGVjKChlcnIsIHJlcykgPT4ge1xuICAgICAgY2FsbGJhY2soZXJyLCByZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0cmlldmVXaXRoSW5jbHVkZWQoZmllbGQ6IGFueSxpbmNsdWRlZDogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChmaWVsZCwgaW5jbHVkZWQpLmxlYW4oKS5leGVjKChlcnIsIHJlcykgPT4ge1xuICAgICAgY2FsbGJhY2soZXJyLCByZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0cmlldmVXaXRob3V0TGVhbihmaWVsZDogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChmaWVsZCwge30pLmV4ZWMoKGVyciwgcmVzKSA9PiB7XG4gICAgICBjYWxsYmFjayhlcnIsIHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICByZXRyaWV2ZVdpdGhMZWFuKGZpZWxkOiBhbnksIHByb2plY3Rpb246IGFueSwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmZpbmQoZmllbGQsIHByb2plY3Rpb24pLmxlYW4oKS5leGVjKChlcnIsIHJlcykgPT4ge1xuICAgICAgY2FsbGJhY2soZXJyLCByZXMpO1xuICAgIH0pO1xuICB9XG4gIGNvdW50V2l0aExlYW4oZmllbGQ6IGFueSxwcm9qZWN0aW9uOmFueSwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIGNvbnNvbGUudGltZSgnY291bnQgdGltZScpO1xuICAgIHRoaXMuX21vZGVsLmZpbmQoZmllbGQsIHByb2plY3Rpb24pLmxlYW4oKS5leGVjKChlcnIsIHJlcykgPT4ge1xuICAgICAgY29uc29sZS50aW1lRW5kKCdjb3VudCB0aW1lJyk7XG4gICAgICBjYWxsYmFjayhlcnIsIHJlcyk7XG4gICAgfSk7Ki9cblxuIC8qIHVwZGF0ZShfaWQ6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCBpdGVtOiBULCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwudXBkYXRlKHtfaWQ6IF9pZH0sIGl0ZW0sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHVwZGF0ZVdpdGhRdWVyeShxdWVyeTogYW55LCBpdGVtOiBULCBvcHRpb25zOiBhbnksIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9tb2RlbC5maW5kT25lQW5kVXBkYXRlKHF1ZXJ5LCBpdGVtLCBvcHRpb25zLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgICB9KTtcbiAgfVxuXG4vL1RPRE86Q09ERSBNT1ZFIFRPIENBTkRJREFURSBSRVBPU0lURU9SWVxuICB1cGRhdGVCeVVzZXJJZChfaWQ6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCBpdGVtOiBULCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwudXBkYXRlKHsndXNlcklkJzogX2lkfSwgaXRlbSwgY2FsbGJhY2spO1xuXG4gIH1cblxuICByZXRyaWV2ZUFsbChleGNsdWRlZDogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZCh7fSwgZXhjbHVkZWQpLmxlYW4oKS5leGVjKChlcnIsIHJlcykgPT4ge1xuICAgICAgY2FsbGJhY2soZXJyLCByZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0cmlldmVCeU11bHRpSWRzKHF1ZXJ5OiBhbnksIGV4Y2x1ZGVkOiBhbnksIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBUKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChxdWVyeSwgZXhjbHVkZWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHJldHJpZXZlQnlNdWx0aUlkc0ZvckNvbXBsZXhpdHkoaWRzOiBzdHJpbmdbXSwgZXhjbHVkZWQ6IGFueSwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IFQpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9tb2RlbC5maW5kKHtfaWQ6IHskaW46IGlkc319LCBleGNsdWRlZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgcmV0cmlldmVCeU11bHRpSWRzQW5kTmFtZXMoZmllbGQ6IGFueVtdLCBuYW1lczogYW55LCBleGNsdWRlZDogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogVCkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmZpbmQoeyRhbmQ6IFt7X2lkOiB7JGluOiBmaWVsZH19LCB7bmFtZTogeyRpbjogSlNPTi5wYXJzZShuYW1lcyl9fV19LCBleGNsdWRlZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgZGVsZXRlKF9pZDogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwucmVtb3ZlKHtfaWQ6IHRoaXMudG9PYmplY3RJZChfaWQpfSwgKGVycikgPT4gY2FsbGJhY2soZXJyLCBudWxsKSk7XG4gIH1cblxuICBmaW5kQnlJZChfaWQ6IHN0cmluZywgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IFQpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9tb2RlbC5maW5kQnlJZChfaWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGZpbmRCeUlkd2l0aEV4Y2x1ZGUoX2lkOiBzdHJpbmcsIGV4Y2x1ZGU6IGFueSwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IFQpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9tb2RlbC5maW5kQnlJZChfaWQsIGV4Y2x1ZGUsIGNhbGxiYWNrKTtcbiAgfVxuLy9UT0RPOiBNT1ZFIENPREUgVE8gSVRTIFJFTEVBVEVEIFJFUE9TSVRFT1JZXG4gIGZpbmRCeU5hbWUobmFtZTogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogVCkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmZpbmQoeyduYW1lJzogbmFtZX0sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHRvT2JqZWN0SWQoX2lkOiBzdHJpbmcpOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZCB7XG4gICAgcmV0dXJuIG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLmNyZWF0ZUZyb21IZXhTdHJpbmcoX2lkKTtcbiAgfVxuXG4gIGZpbmRBbmRQb3B1bGF0ZShzZWFyY2hGaWVsZDogYW55LCBwb3B1bGF0ZUZpZWxkOiBhbnksIGNhbGxiYWNrOiAoZXJyOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChzZWFyY2hGaWVsZCkucG9wdWxhdGUocG9wdWxhdGVGaWVsZCkuZXhlYyhmdW5jdGlvbiAoZXJyLCBpdGVtcykge1xuICAgICAgY2FsbGJhY2soZXJyLCBpdGVtcyk7XG4gICAgfSk7XG4gIH1cbi8vVE9ETzogTU9WRSBDT0RFIFRPIElUUyBSRUxFQVRFRCBSRVBPU0lURU9SWVxuICByZXRyaWV2ZUJ5TXVsdGlJZHNBbmRQb3B1bGF0ZShpZHM6IHN0cmluZ1tdLCBleGNsdWRlZDogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZCh7X2lkOiB7JGluOiBpZHN9fSwgZXhjbHVkZWQpLnBvcHVsYXRlKCd1c2VySWQnKS5leGVjKGZ1bmN0aW9uIChlcnIsIGl0ZW1zKSB7XG4gICAgICBjYWxsYmFjayhlcnIsIGl0ZW1zKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHJpZXZlQW5kUG9wdWxhdGUocXVlcnkgOiBPYmplY3QsaW5jbHVkZWQgOiBPYmplY3QsIGNhbGxiYWNrOihlcnJvciA6IGFueSwgcmVzdWx0IDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChxdWVyeSwgaW5jbHVkZWQpLnBvcHVsYXRlKCd1c2VySWQnKS5sZWFuKCkuZXhlYyhmdW5jdGlvbiAoZXJyLCBpdGVtcykge1xuICAgICAgY2FsbGJhY2soZXJyLCBpdGVtcyk7XG4gICAgfSk7XG4gIH1cblxuICBmaW5kT25lQW5kVXBkYXRlKHF1ZXJ5OiBhbnksIG5ld0RhdGE6IGFueSwgb3B0aW9uczogYW55LCBjYWxsYmFjazogKGVycjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmZpbmRPbmVBbmRVcGRhdGUocXVlcnksIG5ld0RhdGEsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgY2FsbGJhY2soZXJyLCByZXN1bHQpO1xuICAgIH0pO1xuICB9XG5cbiAgZmluZE9uZUFuZFVwZGF0ZUluZHVzdHJ5KHF1ZXJ5OiBhbnksIG5ld0RhdGE6IGFueSwgb3B0aW9uczogYW55LCBjYWxsYmFjazogKGVycjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmZpbmRPbmVBbmRVcGRhdGUocXVlcnksIG5ld0RhdGEsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgY2FsbGJhY2soZXJyLCByZXN1bHQpO1xuICAgIH0pO1xuICB9XG5cbiAgLy9jdXN0b20gQVBJIGNyZWF0ZWQgZm9yIEMtbmV4dCBSb2xlcyBjYXBhYmlsaXRpZXMgYW5kIGNvbXBsZXhpdGllc1xuXG4gIC8vY2hhbmdlIHRoZSBhbnkgZGF0YSB0eXBlIHRvIG1vZGVsXG5cbi8vVE9ETzogTU9WRSBDT0RFIFRPIElUUyBSRUxFQVRFRCBSRVBPU0lURU9SWVxuICBwdXNoRWxlbWVudEluQXJyYXkodmFsdWU6IHN0cmluZywgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLnVwZGF0ZSh7JHB1c2g6IHsncHJvZmljaWVuY2llcyc6IHZhbHVlfX0sIGNhbGxiYWNrKTtcbiAgfVxuLy9UT0RPOiBNT1ZFIENPREUgVE8gSVRTIFJFTEVBVEVEIFJFUE9TSVRFT1JZXG4gIC8vaW4gYmVsb3cgcXVlcnkgd2UgdXNlIHVzZXJJZCBmb3Igc2VhcmNoIGFzIHJlZnJlbmNlIGlkXG4gIHJldHJpZXZlQnlNdWx0aVJlZnJlbmNlSWRzQW5kUG9wdWxhdGUoaWRzOiBzdHJpbmdbXSwgZXhjbHVkZWQ6IGFueSwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIHRoaXMuX21vZGVsLmZpbmQoeyd1c2VySWQnOiB7JGluOiBpZHN9fSwgZXhjbHVkZWQpLnBvcHVsYXRlKCd1c2VySWQnKS5leGVjKGZ1bmN0aW9uIChlcnIsIGl0ZW1zKSB7XG4gICAgICBjYWxsYmFjayhlcnIsIGl0ZW1zKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHJpZXZlQnlTb3J0ZWRPcmRlcihxdWVyeTogYW55LCBwcm9qZWN0aW9uOiBhbnksIHNvcnRpbmdRdWVyeTogYW55LCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChxdWVyeSwgcHJvamVjdGlvbikuc29ydChzb3J0aW5nUXVlcnkpLmxlYW4oKS5leGVjKGZ1bmN0aW9uIChlcnIsIGl0ZW1zKSB7XG4gICAgICBjYWxsYmFjayhlcnIsIGl0ZW1zKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldENvdW50KHF1ZXJ5OiBhbnksICBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fbW9kZWwuZmluZChxdWVyeSkuY291bnQoKS5sZWFuKCkuZXhlYyhmdW5jdGlvbiAoZXJyLCBpdGVtcykge1xuICAgICAgY2FsbGJhY2soZXJyLCBpdGVtcyk7XG4gICAgfSk7XG4gIH0qL1xufVxuXG5leHBvcnQgPSBSZXBvc2l0b3J5QmFzZTtcbiJdfQ==
