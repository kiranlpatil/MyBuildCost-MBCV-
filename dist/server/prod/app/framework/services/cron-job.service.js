"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var LoggerService = require("../shared/logger/LoggerService");
var mailchimp_mailer_service_1 = require("./mailchimp-mailer.service");
var sharedconstants_1 = require("../shared/sharedconstants");
var CronJob = require('cron').CronJob;
var config = require('config');
var _loggerService = new LoggerService('MAILCHIMP_MAILER_SERVICE');
var CronJobService = (function () {
    function CronJobService() {
    }
    CronJobService.prototype.OnCronJobStart = function () {
        var mailChimpMailerService = new mailchimp_mailer_service_1.MailChimpMailerService();
        var sendingMailOnProfileUpdate = new CronJob('00 30 23 * * 0-6', function () {
            mailChimpMailerService.onCronJobCandidateProfileTriggered(sharedconstants_1.CandidateProfileUpdateTrackServerSide.STEP_IS_COMPLETED_AREA_OF_WORK, config.get('TplSeed.mail.MAILCHIMP_CANDIDATE_PROFILE_SUBMIT_25%_LISTID'));
            mailChimpMailerService.onCronJobCandidateProfileTriggered(sharedconstants_1.CandidateProfileUpdateTrackServerSide.STEP_IS_COMPLETED_CAPABILITIES, config.get('TplSeed.mail.MAILCHIMP_CANDIDATE_PROFILE_SUBMIT_50%_LISTID'));
            mailChimpMailerService.onCronJobCandidateProfileTriggered(sharedconstants_1.CandidateProfileUpdateTrackServerSide.STEP_IS_COMPLETED_COMPLEXITIES, config.get('TplSeed.mail.MAILCHIMP_CANDIDATE_PROFILE_SUBMIT_75%_LISTID'));
            mailChimpMailerService.onCronJobCandidateProfileTriggered(sharedconstants_1.CandidateProfileUpdateTrackServerSide.STEP_IS_ENTER_KEY_SKILLS, config.get('TplSeed.mail.MAILCHIMP_CANDIDATE_PROFILE_SUBMIT_95%_LISTID'));
        }, null, false, 'Asia/Kolkata');
        sendingMailOnProfileUpdate.start();
    };
    return CronJobService;
}());
exports.CronJobService = CronJobService;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9mcmFtZXdvcmsvc2VydmljZXMvY3Jvbi1qb2Iuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhEQUFpRTtBQUNqRSx1RUFBb0U7QUFDcEUsNkRBQWdGO0FBRWhGLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDdEMsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLElBQUssY0FBYyxHQUFrQixJQUFJLGFBQWEsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBSW5GO0lBQUE7SUFZQSxDQUFDO0lBVkMsdUNBQWMsR0FBZDtRQUNFLElBQUksc0JBQXNCLEdBQUMsSUFBSSxpREFBc0IsRUFBRSxDQUFDO1FBQ3hELElBQUksMEJBQTBCLEdBQUcsSUFBSSxPQUFPLENBQUMsa0JBQWtCLEVBQUU7WUFDL0Qsc0JBQXNCLENBQUUsa0NBQWtDLENBQUMsdURBQXFDLENBQUMsOEJBQThCLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0REFBNEQsQ0FBQyxDQUFDLENBQUM7WUFDMU0sc0JBQXNCLENBQUUsa0NBQWtDLENBQUMsdURBQXFDLENBQUMsOEJBQThCLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0REFBNEQsQ0FBQyxDQUFDLENBQUM7WUFDMU0sc0JBQXNCLENBQUUsa0NBQWtDLENBQUMsdURBQXFDLENBQUMsOEJBQThCLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0REFBNEQsQ0FBQyxDQUFDLENBQUM7WUFDMU0sc0JBQXNCLENBQUUsa0NBQWtDLENBQUMsdURBQXFDLENBQUMsd0JBQXdCLEVBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0REFBNEQsQ0FBQyxDQUFDLENBQUM7UUFDcE0sQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUMsY0FBYyxDQUFDLENBQUM7UUFDakMsMEJBQTBCLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDckMsQ0FBQztJQUNILHFCQUFDO0FBQUQsQ0FaQSxBQVlDLElBQUE7QUFaWSx3Q0FBYyIsImZpbGUiOiJhcHAvZnJhbWV3b3JrL3NlcnZpY2VzL2Nyb24tam9iLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nZ2VyU2VydmljZSA9IHJlcXVpcmUoJy4uL3NoYXJlZC9sb2dnZXIvTG9nZ2VyU2VydmljZScpO1xuaW1wb3J0IHsgTWFpbENoaW1wTWFpbGVyU2VydmljZSB9IGZyb20gJy4vbWFpbGNoaW1wLW1haWxlci5zZXJ2aWNlJztcbmltcG9ydCB7Q2FuZGlkYXRlUHJvZmlsZVVwZGF0ZVRyYWNrU2VydmVyU2lkZX0gZnJvbSAnLi4vc2hhcmVkL3NoYXJlZGNvbnN0YW50cyc7XG5cbnZhciBDcm9uSm9iID0gcmVxdWlyZSgnY3JvbicpLkNyb25Kb2I7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnY29uZmlnJyk7XG52YXIgIF9sb2dnZXJTZXJ2aWNlOiBMb2dnZXJTZXJ2aWNlID0gbmV3IExvZ2dlclNlcnZpY2UoJ01BSUxDSElNUF9NQUlMRVJfU0VSVklDRScpO1xuXG5cblxuZXhwb3J0IGNsYXNzIENyb25Kb2JTZXJ2aWNlIHtcblxuICBPbkNyb25Kb2JTdGFydCgpIHtcbiAgICB2YXIgbWFpbENoaW1wTWFpbGVyU2VydmljZT1uZXcgTWFpbENoaW1wTWFpbGVyU2VydmljZSgpO1xuICAgIHZhciBzZW5kaW5nTWFpbE9uUHJvZmlsZVVwZGF0ZSA9IG5ldyBDcm9uSm9iKCcwMCAzMCAyMyAqICogMC02JywgZnVuY3Rpb24gKCkge1xuICAgICAgbWFpbENoaW1wTWFpbGVyU2VydmljZS4gb25Dcm9uSm9iQ2FuZGlkYXRlUHJvZmlsZVRyaWdnZXJlZChDYW5kaWRhdGVQcm9maWxlVXBkYXRlVHJhY2tTZXJ2ZXJTaWRlLlNURVBfSVNfQ09NUExFVEVEX0FSRUFfT0ZfV09SSyxjb25maWcuZ2V0KCdUcGxTZWVkLm1haWwuTUFJTENISU1QX0NBTkRJREFURV9QUk9GSUxFX1NVQk1JVF8yNSVfTElTVElEJykpO1xuICAgICAgbWFpbENoaW1wTWFpbGVyU2VydmljZS4gb25Dcm9uSm9iQ2FuZGlkYXRlUHJvZmlsZVRyaWdnZXJlZChDYW5kaWRhdGVQcm9maWxlVXBkYXRlVHJhY2tTZXJ2ZXJTaWRlLlNURVBfSVNfQ09NUExFVEVEX0NBUEFCSUxJVElFUyxjb25maWcuZ2V0KCdUcGxTZWVkLm1haWwuTUFJTENISU1QX0NBTkRJREFURV9QUk9GSUxFX1NVQk1JVF81MCVfTElTVElEJykpO1xuICAgICAgbWFpbENoaW1wTWFpbGVyU2VydmljZS4gb25Dcm9uSm9iQ2FuZGlkYXRlUHJvZmlsZVRyaWdnZXJlZChDYW5kaWRhdGVQcm9maWxlVXBkYXRlVHJhY2tTZXJ2ZXJTaWRlLlNURVBfSVNfQ09NUExFVEVEX0NPTVBMRVhJVElFUyxjb25maWcuZ2V0KCdUcGxTZWVkLm1haWwuTUFJTENISU1QX0NBTkRJREFURV9QUk9GSUxFX1NVQk1JVF83NSVfTElTVElEJykpO1xuICAgICAgbWFpbENoaW1wTWFpbGVyU2VydmljZS4gb25Dcm9uSm9iQ2FuZGlkYXRlUHJvZmlsZVRyaWdnZXJlZChDYW5kaWRhdGVQcm9maWxlVXBkYXRlVHJhY2tTZXJ2ZXJTaWRlLlNURVBfSVNfRU5URVJfS0VZX1NLSUxMUyxjb25maWcuZ2V0KCdUcGxTZWVkLm1haWwuTUFJTENISU1QX0NBTkRJREFURV9QUk9GSUxFX1NVQk1JVF85NSVfTElTVElEJykpO1xuICAgICAgfSwgbnVsbCwgZmFsc2UsJ0FzaWEvS29sa2F0YScpO1xuICAgIHNlbmRpbmdNYWlsT25Qcm9maWxlVXBkYXRlLnN0YXJ0KCk7XG4gIH1cbn1cbiJdfQ==
