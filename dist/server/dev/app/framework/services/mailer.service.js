"use strict";
var nodemailer = require("nodemailer");
var LoggerService = require("../shared/logger/LoggerService");
var fs = require("fs");
var path = require("path");
var config = require('config');
var loggerService = new LoggerService('MAILCHIMP_MAILER_SERVICE');
var SendMailService = (function () {
    function SendMailService() {
    }
    SendMailService.prototype.send = function (sendmailTo, subject, templateName, data, callback, carbonCopy, attachment) {
        var content = fs.readFileSync(path.resolve() + config.get('application.publicPath') + 'templates/' + templateName).toString();
        if (content) {
            console.log('content resolve : ' + JSON.stringify(content));
            var result = content;
            callback(null, null);
        }
        else {
            var content2 = fs.readFileSync(config.get('application.publicPath') + 'templates/' + templateName).toString();
            console.log('content  publicPath: ' + JSON.stringify(content2));
            callback(null, null);
        }
    };
    SendMailService.smtpTransport = nodemailer.createTransport({
        service: config.get('application.mail.MAIL_SERVICE'),
        auth: {
            user: config.get('application.mail.MAIL_SENDER'),
            pass: config.get('application.mail.MAIL_SENDER_PASSWORD')
        }
    });
    return SendMailService;
}());
Object.seal(SendMailService);
module.exports = SendMailService;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9mcmFtZXdvcmsvc2VydmljZXMvbWFpbGVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHVDQUF5QztBQUV6Qyw4REFBaUU7QUFDakUsdUJBQXlCO0FBQ3pCLDJCQUE2QjtBQUc3QixJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsSUFBSSxhQUFhLEdBQUcsSUFBSSxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUVsRTtJQUFBO0lBMENBLENBQUM7SUFqQ0MsOEJBQUksR0FBSixVQUFLLFVBQWtCLEVBQUUsT0FBZSxFQUFFLFlBQW9CLEVBQ3pELElBQXlCLEVBQ3pCLFFBQXlELEVBQUUsVUFBbUIsRUFBQyxVQUFlO1FBRWpHLElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsR0FBRyxZQUFZLEdBQUcsWUFBWSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDOUgsRUFBRSxDQUFBLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEdBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQzFELElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQztZQUNyQixRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLFlBQVksR0FBRyxZQUFZLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUM5RyxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixHQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUM5RCxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLENBQUM7SUFtQkgsQ0FBQztJQXhDTSw2QkFBYSxHQUFHLFVBQVUsQ0FBQyxlQUFlLENBQUM7UUFDaEQsT0FBTyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsK0JBQStCLENBQUM7UUFDcEQsSUFBSSxFQUFFO1lBQ0osSUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUM7WUFDaEQsSUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsdUNBQXVDLENBQUM7U0FDMUQ7S0FDRixDQUFDLENBQUM7SUFtQ0wsc0JBQUM7Q0ExQ0QsQUEwQ0MsSUFBQTtBQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDN0IsaUJBQVMsZUFBZSxDQUFDIiwiZmlsZSI6ImFwcC9mcmFtZXdvcmsvc2VydmljZXMvbWFpbGVyLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xyXG5pbXBvcnQgTWFpbEF0dGFjaG1lbnRzID0gcmVxdWlyZSgnLi4vc2hhcmVkL3NoYXJlZGFycmF5Jyk7XHJcbmltcG9ydCBMb2dnZXJTZXJ2aWNlID0gcmVxdWlyZSgnLi4vc2hhcmVkL2xvZ2dlci9Mb2dnZXJTZXJ2aWNlJyk7XHJcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgU2VudE1lc3NhZ2VJbmZvIH0gZnJvbSAnbm9kZW1haWxlcic7XHJcblxyXG5sZXQgY29uZmlnID0gcmVxdWlyZSgnY29uZmlnJyk7XHJcbmxldCBsb2dnZXJTZXJ2aWNlID0gbmV3IExvZ2dlclNlcnZpY2UoJ01BSUxDSElNUF9NQUlMRVJfU0VSVklDRScpO1xyXG5cclxuY2xhc3MgU2VuZE1haWxTZXJ2aWNlIHtcclxuICBzdGF0aWMgc210cFRyYW5zcG9ydCA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgIHNlcnZpY2U6IGNvbmZpZy5nZXQoJ2FwcGxpY2F0aW9uLm1haWwuTUFJTF9TRVJWSUNFJyksXHJcbiAgICBhdXRoOiB7XHJcbiAgICAgIHVzZXI6IGNvbmZpZy5nZXQoJ2FwcGxpY2F0aW9uLm1haWwuTUFJTF9TRU5ERVInKSxcclxuICAgICAgcGFzczogY29uZmlnLmdldCgnYXBwbGljYXRpb24ubWFpbC5NQUlMX1NFTkRFUl9QQVNTV09SRCcpXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHNlbmQoc2VuZG1haWxUbzogc3RyaW5nLCBzdWJqZWN0OiBzdHJpbmcsIHRlbXBsYXRlTmFtZTogc3RyaW5nLFxyXG4gICAgICAgZGF0YTogTWFwPHN0cmluZywgc3RyaW5nPixcclxuICAgICAgIGNhbGxiYWNrOiAoZXJyb3I6IEVycm9yLCByZXN1bHQ6IFNlbnRNZXNzYWdlSW5mbykgPT4gdm9pZCwgY2FyYm9uQ29weT86IHN0cmluZyxhdHRhY2htZW50PzphbnkpIHtcclxuXHJcbiAgICBsZXQgY29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhwYXRoLnJlc29sdmUoKSArIGNvbmZpZy5nZXQoJ2FwcGxpY2F0aW9uLnB1YmxpY1BhdGgnKSArICd0ZW1wbGF0ZXMvJyArIHRlbXBsYXRlTmFtZSkudG9TdHJpbmcoKTtcclxuICAgIGlmKGNvbnRlbnQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ2NvbnRlbnQgcmVzb2x2ZSA6ICcrSlNPTi5zdHJpbmdpZnkoY29udGVudCkpO1xyXG4gICAgICBsZXQgcmVzdWx0ID0gY29udGVudDtcclxuICAgICAgY2FsbGJhY2sobnVsbCwgbnVsbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgY29udGVudDIgPSBmcy5yZWFkRmlsZVN5bmMoY29uZmlnLmdldCgnYXBwbGljYXRpb24ucHVibGljUGF0aCcpICsgJ3RlbXBsYXRlcy8nICsgdGVtcGxhdGVOYW1lKS50b1N0cmluZygpO1xyXG4gICAgICBjb25zb2xlLmxvZygnY29udGVudCAgcHVibGljUGF0aDogJytKU09OLnN0cmluZ2lmeShjb250ZW50MikpO1xyXG4gICAgICBjYWxsYmFjayhudWxsLCBudWxsKTtcclxuICAgIH1cclxuICAgIC8qZGF0YS5mb3JFYWNoKCh2YWx1ZTogc3RyaW5nLCBrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKGtleSwgdmFsdWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IG1haWxPcHRpb25zID0ge1xyXG4gICAgICBmcm9tOiBjb25maWcuZ2V0KCdhcHBsaWNhdGlvbi5tYWlsLk1BSUxfU0VOREVSJyksXHJcbiAgICAgIHRvOiBzZW5kbWFpbFRvLFxyXG4gICAgICBjYzogY2FyYm9uQ29weSxcclxuICAgICAgc3ViamVjdDogc3ViamVjdCxcclxuICAgICAgaHRtbDogY29udGVudCxcclxuICAgICAgYXR0YWNobWVudHM6YXR0YWNobWVudD9hdHRhY2htZW50OiBNYWlsQXR0YWNobWVudHMuQXR0YWNobWVudEFycmF5XHJcbiAgICB9O1xyXG4gICAgU2VuZE1haWxTZXJ2aWNlLnNtdHBUcmFuc3BvcnQuc2VuZE1haWwobWFpbE9wdGlvbnMsIGZ1bmN0aW9uIChlcnJvcjogRXJyb3IsIHJlc3BvbnNlOiBTZW50TWVzc2FnZUluZm8pIHtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgbG9nZ2VyU2VydmljZS5sb2dFcnJvcignIEVycm9yIGluIG1haWwgc2VuZCAnICsgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhbGxiYWNrKGVycm9yLCByZXNwb25zZSk7XHJcbiAgICB9KTsqL1xyXG4gIH1cclxufVxyXG5cclxuT2JqZWN0LnNlYWwoU2VuZE1haWxTZXJ2aWNlKTtcclxuZXhwb3J0ID0gU2VuZE1haWxTZXJ2aWNlO1xyXG4iXX0=
