"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var index_1 = require("../../../../shared/index");
var http_delegate_service_1 = require("../../../../shared/services/http-delegate.service");
var constants_1 = require("../../../../shared/constants");
var CostSummaryService = (function (_super) {
    __extends(CostSummaryService, _super);
    function CostSummaryService(messageService, httpDelegateService) {
        var _this = _super.call(this) || this;
        _this.messageService = messageService;
        _this.httpDelegateService = httpDelegateService;
        return _this;
    }
    CostSummaryService.prototype.getCostSummaryReport = function (projectId, defaultCostIn, defaultCostPer) {
        var url = index_1.API.THUMBRULE_RULE_RATE + '/' + index_1.API.PROJECT + '/' + projectId + '/';
        url = (defaultCostIn === constants_1.ProjectElements.RS_PER_SQFT) ? (url + index_1.API.RATE + '/' + index_1.API.SQFT) : (url + index_1.API.RATE + '/' + index_1.API.SQM);
        url = (defaultCostPer === constants_1.ProjectElements.SLAB_AREA) ? (url + '/' + index_1.API.AREA + '/' + index_1.API.SLAB_AREA) :
            ((defaultCostPer === constants_1.ProjectElements.CARPET_AREA) ? (url + '/' + index_1.API.AREA + '/' + index_1.API.CARPET_AREA) :
                (url + '/' + index_1.API.AREA + '/' + index_1.API.SALEABLE_AREA));
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.changeBudgetedCostAmountOfBuildingCostHead = function (projectId, buildingId, costHeadName, amount) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.BUILDING + '/' + buildingId + '/' + index_1.API.COSTHEAD;
        var body = {
            budgetedCostAmount: amount,
            costHead: costHeadName
        };
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.changeBudgetedCostAmountOfProjectCostHead = function (projectId, costHeadName, amount) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.COSTHEAD + '/' + index_1.API.BUDGETED_COST;
        var body = {
            budgetedCostAmount: amount,
            costHead: costHeadName
        };
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.inActiveCostHead = function (projectId, buildingId, costHeadId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.BUILDING + '/' + buildingId + '/' + index_1.API.COSTHEAD + '/' +
            costHeadId + '/' + index_1.API.ACTIVE_STATUS + '/' + index_1.API.ACTIVE_STATUS_FALSE;
        var body = {};
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.getAllInActiveProjectCostHeads = function (projectId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.COSTHEAD;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.getAllInActiveCostHeads = function (projectId, buildingId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.BUILDING + '/' + buildingId + '/' + index_1.API.COSTHEAD;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.activeCostHead = function (projectId, buildingId, selectedInActiveCostHeadId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.BUILDING + '/' + buildingId + '/' + index_1.API.COSTHEAD + '/' +
            selectedInActiveCostHeadId + '/' + index_1.API.ACTIVE_STATUS + '/' + index_1.API.ACTIVE_STATUS_TRUE;
        var body = {};
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.activateProjectCostHead = function (projectId, selectedInActiveCostHeadId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.COSTHEAD + '/' +
            selectedInActiveCostHeadId + '/' + index_1.API.ACTIVE_STATUS + '/' + index_1.API.ACTIVE_STATUS_TRUE;
        var body = {};
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.inactivateProjectCostHead = function (projectId, selectedInActiveCostHeadId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.COSTHEAD + '/' +
            selectedInActiveCostHeadId + '/' + index_1.API.ACTIVE_STATUS + '/' + index_1.API.ACTIVE_STATUS_FALSE;
        var body = {};
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.getInActiveCategories = function (projectId, buildingId, costHeadId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.BUILDING + '/' + buildingId + '/' +
            index_1.API.COSTHEAD + '/' + costHeadId + '/' + index_1.API.CATEGORYLIST;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.deactivateWorkItem = function (baseUrl, costHeadId, subCategoryId, workItemId) {
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' +
            costHeadId + '/' + index_1.API.CATEGORY + '/' + subCategoryId + '/' + index_1.API.WORKITEM + '/' + workItemId + '/' +
            index_1.API.ACTIVE_STATUS + '/' + index_1.API.ACTIVE_STATUS_FALSE;
        var body = {};
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.getInActiveWorkItems = function (baseUrl, costHeadId, subCategoryId) {
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' +
            costHeadId + '/' + index_1.API.CATEGORY + '/' + subCategoryId + '/' + index_1.API.WORKITEM;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.activateWorkItem = function (baseUrl, costHeadId, subCategoryId, workItemId) {
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' +
            costHeadId + '/' + index_1.API.CATEGORY + '/' + subCategoryId + '/' + index_1.API.WORKITEM + '/' + workItemId + '/' +
            index_1.API.ACTIVE_STATUS + '/' + index_1.API.ACTIVE_STATUS_TRUE;
        var body = {};
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.getQuantity = function (costHeadName, costHeadItem) {
        var url = index_1.API.PROJECT + '/' + index_1.SessionStorageService.getSessionValue(index_1.SessionStorage.CURRENT_PROJECT_ID) +
            '/' + index_1.API.BUILDING + '/' + index_1.SessionStorageService.getSessionValue(index_1.SessionStorage.CURRENT_BUILDING) +
            '/' + index_1.API.QUANTITY + '/' + costHeadName + '/' + index_1.API.WORKITEM + '/' + costHeadItem;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.updateQuantityItems = function (baseUrl, costHeadId, categoryId, workItemId, quantityItemsArray) {
        var body = { item: quantityItemsArray };
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' + costHeadId +
            '/' + index_1.API.CATEGORY + '/' + categoryId + '/' + index_1.API.WORKITEM + '/' + workItemId + '/' + index_1.API.QUANTITY;
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.updateDirectQuantityAmount = function (baseUrl, costHeadId, categoryId, workItemId, directQuantity) {
        var body = { directQuantity: directQuantity };
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' + costHeadId +
            '/' + index_1.API.CATEGORY + '/' + categoryId + '/' + index_1.API.WORKITEM + '/' + workItemId + '/' + index_1.API.DIRECT + '/' + index_1.API.QUANTITY;
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.deleteQuantityDetailsByName = function (baseUrl, costHeadId, categoryId, workItemId, quantityName) {
        var body = { item: { name: quantityName } };
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' + costHeadId +
            '/' + index_1.API.CATEGORY + '/' + categoryId + '/' + index_1.API.WORKITEM + '/' + workItemId + '/' + index_1.API.QUANTITY + '/' + index_1.API.ITEM;
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.updateRate = function (baseUrl, costHeadId, categoryId, workItemId, rateItemsArray) {
        var body = rateItemsArray;
        var url = baseUrl + '/' + index_1.API.RATE + '/' + index_1.API.COSTHEAD + '/' +
            costHeadId + '/' + index_1.API.CATEGORY + '/' + categoryId + '/' + index_1.API.WORKITEM + '/' + workItemId;
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.updateDirectRate = function (baseUrl, costHeadId, categoryId, workItemId, directRate) {
        var body = { directRate: directRate };
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' + costHeadId +
            '/' + index_1.API.CATEGORY + '/' + categoryId + '/' + index_1.API.WORKITEM + '/' + workItemId + '/' + index_1.API.DIRECT + '/' + index_1.API.RATE;
        return this.httpDelegateService.putAPI(url, body);
    };
    CostSummaryService.prototype.getRateItems = function (projectId, buildingId, costheadId, categoryId, workItemId) {
        var url = index_1.API.PROJECT + '/' + projectId + '/' + index_1.API.BUILDING + '/' + buildingId + '/' + index_1.API.RATE + '/' + index_1.API.COSTHEAD + '/' +
            costheadId + '/' + index_1.API.CATEGORY + '/' + categoryId + '/' + index_1.API.WORKITEM + '/' + workItemId;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.getCategories = function (baseUrl, costHeadId) {
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' + costHeadId + '/' + index_1.API.CATEGORY;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.getCostHeadDetails = function (baseUrl, costHeadId) {
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' + costHeadId;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.getActiveWorkItemsOfCategory = function (baseUrl, costHeadId, categoryId) {
        var url = baseUrl + '/' + index_1.API.COSTHEAD + '/' + costHeadId + '/' + index_1.API.CATEGORY + '/' + categoryId + '/' + index_1.API.WORKITEMLIST;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService.prototype.getRateItemsByOriginalName = function (baseUrl, originalRateItemName) {
        var url = baseUrl + '/' + index_1.API.RATES + '/' + index_1.API.RATE_ITEM + '/' + originalRateItemName;
        return this.httpDelegateService.getAPI(url);
    };
    CostSummaryService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [index_1.MessageService, http_delegate_service_1.HttpDelegateService])
    ], CostSummaryService);
    return CostSummaryService;
}(index_1.BaseService));
exports.CostSummaryService = CostSummaryService;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9idWlsZC1pbmZvL2ZyYW1ld29yay9wcm9qZWN0L2Nvc3Qtc3VtbWFyeS1yZXBvcnQvY29zdC1zdW1tYXJ5LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0NBQTJDO0FBQzNDLGtEQUFtSDtBQUNuSCwyRkFBd0Y7QUFHeEYsMERBQStEO0FBRy9EO0lBQXdDLHNDQUFXO0lBRWpELDRCQUFzQixjQUE4QixFQUFZLG1CQUF5QztRQUF6RyxZQUNFLGlCQUFPLFNBQ1I7UUFGcUIsb0JBQWMsR0FBZCxjQUFjLENBQWdCO1FBQVkseUJBQW1CLEdBQW5CLG1CQUFtQixDQUFzQjs7SUFFekcsQ0FBQztJQUdELGlEQUFvQixHQUFwQixVQUFxQixTQUFpQixFQUFDLGFBQW9CLEVBQUMsY0FBcUI7UUFFL0UsSUFBSSxHQUFHLEdBQUcsV0FBRyxDQUFDLG1CQUFtQixHQUFHLEdBQUcsR0FBRSxXQUFHLENBQUMsT0FBTyxHQUFFLEdBQUcsR0FBQyxTQUFTLEdBQUMsR0FBRyxDQUFDO1FBQ3hFLEdBQUcsR0FBSSxDQUFFLGFBQWEsS0FBSywyQkFBZSxDQUFDLFdBQVcsQ0FBRSxHQUFHLENBQUUsR0FBRyxHQUFHLFdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLFdBQUcsQ0FBQyxJQUFJLENBQUUsR0FBRyxDQUFFLEdBQUcsR0FBRyxXQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxXQUFHLENBQUMsR0FBRyxDQUFFLENBQUM7UUFDcEksR0FBRyxHQUFFLENBQUUsY0FBYyxLQUFLLDJCQUFlLENBQUMsU0FBUyxDQUFFLEdBQUksQ0FBRSxHQUFHLEdBQUcsR0FBRyxHQUFFLFdBQUcsQ0FBQyxJQUFJLEdBQUUsR0FBRyxHQUFHLFdBQUcsQ0FBQyxTQUFTLENBQUU7WUFDbkcsQ0FBQyxDQUFFLGNBQWMsS0FBSywyQkFBZSxDQUFDLFdBQVcsQ0FBRSxHQUFHLENBQUUsR0FBRyxHQUFHLEdBQUcsR0FB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QUFFLFdBQUcsQ0FBQyxTQUFTLEdBQUcsR0FBRyxHQUFFLG9CQUFvQixDQUFDO1FBQ2xGLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUF6TVUsa0JBQWtCO1FBRDlCLGlCQUFVLEVBQUU7eUNBRzJCLHNCQUFjLEVBQWtDLDJDQUFtQjtPQUY5RixrQkFBa0IsQ0EwTTlCO0lBQUQseUJBQUM7Q0ExTUQsQUEwTUMsQ0ExTXVDLG1CQUFXLEdBME1sRDtBQTFNWSxnREFBa0IiLCJmaWxlIjoiYXBwL2J1aWxkLWluZm8vZnJhbWV3b3JrL3Byb2plY3QvY29zdC1zdW1tYXJ5LXJlcG9ydC9jb3N0LXN1bW1hcnkuc2VydmljZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQVBJLCBCYXNlU2VydmljZSwgU2Vzc2lvblN0b3JhZ2UsIFNlc3Npb25TdG9yYWdlU2VydmljZSwgTWVzc2FnZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvaW5kZXgnO1xyXG5pbXBvcnQgeyBIdHRwRGVsZWdhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL3NlcnZpY2VzL2h0dHAtZGVsZWdhdGUuc2VydmljZSc7XHJcbmltcG9ydCB7IFF1YW50aXR5SXRlbSB9IGZyb20gJy4uLy4uL21vZGVsL3F1YW50aXR5LWl0ZW0nO1xyXG5pbXBvcnQgeyBSYXRlIH0gZnJvbSAnLi4vLi4vbW9kZWwvcmF0ZSc7XHJcbmltcG9ydCB7IFByb2plY3RFbGVtZW50cyB9IGZyb20gJy4uLy4uLy4uLy4uL3NoYXJlZC9jb25zdGFudHMnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQ29zdFN1bW1hcnlTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2Uge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgbWVzc2FnZVNlcnZpY2U6IE1lc3NhZ2VTZXJ2aWNlLCBwcm90ZWN0ZWQgaHR0cERlbGVnYXRlU2VydmljZSA6IEh0dHBEZWxlZ2F0ZVNlcnZpY2UpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICAvL1JlcG9ydCBjaGFuZ2VzXHJcbiAgZ2V0Q29zdFN1bW1hcnlSZXBvcnQocHJvamVjdElkOiBzdHJpbmcsZGVmYXVsdENvc3RJbjpzdHJpbmcsZGVmYXVsdENvc3RQZXI6c3RyaW5nKSB7XHJcblxyXG4gICAgdmFyIHVybCA9IEFQSS5USFVNQlJVTEVfUlVMRV9SQVRFICsgJy8nKyBBUEkuUFJPSkVDVCArJy8nK3Byb2plY3RJZCsnLyc7XHJcbiAgICB1cmwgPSAgKCBkZWZhdWx0Q29zdEluID09PSBQcm9qZWN0RWxlbWVudHMuUlNfUEVSX1NRRlQgKSA/ICggdXJsICsgQVBJLlJBVEUgKyAnLycgKyBBUEkuU1FGVCApIDogKCB1cmwgKyBBUEkuUkFURSArICcvJyArIEFQSS5TUU0gKTtcclxuICAgIHVybD0gKCBkZWZhdWx0Q29zdFBlciA9PT0gUHJvamVjdEVsZW1lbnRzLlNMQUJfQVJFQSApID8gICggdXJsICsgJy8nKyBBUEkuQVJFQSArJy8nICsgQVBJLlNMQUJfQVJFQSApIDpcclxuICAgICAgKCggZGVmYXVsdENvc3RQZXIgPT09IFByb2plY3RFbGVtZW50cy5DQVJQRVRfQVJFQSApID8gKCB1cmwgKyAnLycrIEFQSS5BUkVBICsnLycgKyBBUEkuQ0FSUEVUX0FSRUEgKSA6XHJcbiAgICAgICAgKCB1cmwgKyAnLycrIEFQSS5BUkVBICsnLycgKyBBUEkuU0FMRUFCTEVfQVJFQSApKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwRGVsZWdhdGVTZXJ2aWNlLmdldEFQSSh1cmwpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQnVkZ2V0ZWRDb3N0QW1vdW50T2ZCdWlsZGluZ0Nvc3RIZWFkKHByb2plY3RJZCA6IHN0cmluZywgYnVpbGRpbmdJZCA6IHN0cmluZywgY29zdEhlYWROYW1lIDogc3RyaW5nLCBhbW91bnQgOiBudW1iZXIpIHtcclxuICAgIHZhciB1cmwgPSBBUEkuUFJPSkVDVCArICcvJyArIHByb2plY3RJZCArICcvJyArIEFQSS5CVUlMRElORyArICcvJyArIGJ1aWxkaW5nSWQgKyAnLycgKyBBUEkuQ09TVEhFQUQgO1xyXG4gICAgdmFyIGJvZHkgPSB7XHJcbiAgICAgIGJ1ZGdldGVkQ29zdEFtb3VudCA6IGFtb3VudCxcclxuICAgICAgY29zdEhlYWQgOiBjb3N0SGVhZE5hbWVcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5wdXRBUEkodXJsLCBib2R5KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUJ1ZGdldGVkQ29zdEFtb3VudE9mUHJvamVjdENvc3RIZWFkKHByb2plY3RJZCA6IHN0cmluZywgY29zdEhlYWROYW1lIDogc3RyaW5nLCBhbW91bnQgOiBudW1iZXIpIHtcclxuXHJcbiAgICB2YXIgdXJsID0gQVBJLlBST0pFQ1QgKyAnLycgKyBwcm9qZWN0SWQgKyAnLycgKyBBUEkuQ09TVEhFQUQgKyAnLycgKyBBUEkuQlVER0VURURfQ09TVDtcclxuICAgIHZhciBib2R5ID0ge1xyXG4gICAgICBidWRnZXRlZENvc3RBbW91bnQgOiBhbW91bnQsXHJcbiAgICAgIGNvc3RIZWFkIDogY29zdEhlYWROYW1lXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UucHV0QVBJKHVybCwgYm9keSk7XHJcbiAgfVxyXG5cclxuICAvLyBDb3N0IEhlYWQgQ1JVRCBBUElcclxuICBpbkFjdGl2ZUNvc3RIZWFkKHByb2plY3RJZDpzdHJpbmcsIGJ1aWxkaW5nSWQ6c3RyaW5nLCBjb3N0SGVhZElkOm51bWJlcikge1xyXG4gICAgdmFyIHVybCA9ICBBUEkuUFJPSkVDVCArICcvJysgcHJvamVjdElkICsnLycrIEFQSS5CVUlMRElORyArJy8nKyBidWlsZGluZ0lkICsnLycrIEFQSS5DT1NUSEVBRCArJy8nK1xyXG4gICAgICBjb3N0SGVhZElkICsnLycrIEFQSS5BQ1RJVkVfU1RBVFVTICsnLycrIEFQSS5BQ1RJVkVfU1RBVFVTX0ZBTFNFO1xyXG4gICAgbGV0IGJvZHkgPSB7fTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwRGVsZWdhdGVTZXJ2aWNlLnB1dEFQSSh1cmwsIGJvZHkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsSW5BY3RpdmVQcm9qZWN0Q29zdEhlYWRzKHByb2plY3RJZCA6IHN0cmluZykge1xyXG4gICAgdmFyIHVybCA9IEFQSS5QUk9KRUNUICsgJy8nKyBwcm9qZWN0SWQgKyAnLycgKyBBUEkuQ09TVEhFQUQ7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5nZXRBUEkodXJsKTtcclxuICB9XHJcblxyXG4gIGdldEFsbEluQWN0aXZlQ29zdEhlYWRzKHByb2plY3RJZCA6IHN0cmluZywgYnVpbGRpbmdJZCA6IHN0cmluZykge1xyXG4gICAgdmFyIHVybCA9IEFQSS5QUk9KRUNUICsgJy8nKyBwcm9qZWN0SWQgKyAnLycrIEFQSS5CVUlMRElORyArICcvJyArIGJ1aWxkaW5nSWQgKyAnLycgKyBBUEkuQ09TVEhFQUQ7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5nZXRBUEkodXJsKTtcclxuICB9XHJcblxyXG4gIC8vIFJlY29uc2lkZXIgdGhpcyBtZXRob2RcclxuICBhY3RpdmVDb3N0SGVhZCggcHJvamVjdElkIDogc3RyaW5nLCBidWlsZGluZ0lkIDogc3RyaW5nLCBzZWxlY3RlZEluQWN0aXZlQ29zdEhlYWRJZCA6IG51bWJlcikge1xyXG4gICAgdmFyIHVybCA9IEFQSS5QUk9KRUNUICsgJy8nICsgcHJvamVjdElkICsgJy8nICsgQVBJLkJVSUxESU5HICsgJy8nICsgYnVpbGRpbmdJZCArICcvJysgQVBJLkNPU1RIRUFEICsnLycgK1xyXG4gICAgICBzZWxlY3RlZEluQWN0aXZlQ29zdEhlYWRJZCArJy8nKyBBUEkuQUNUSVZFX1NUQVRVUyArICcvJyArIEFQSS5BQ1RJVkVfU1RBVFVTX1RSVUU7XHJcbiAgICBsZXQgYm9keSA9IHt9O1xyXG5cclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UucHV0QVBJKHVybCwgYm9keSk7XHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZVByb2plY3RDb3N0SGVhZCggcHJvamVjdElkIDogc3RyaW5nLCBzZWxlY3RlZEluQWN0aXZlQ29zdEhlYWRJZCA6IG51bWJlcikge1xyXG4gICAgdmFyIHVybCA9IEFQSS5QUk9KRUNUICsgJy8nICsgcHJvamVjdElkICsgJy8nICsgQVBJLkNPU1RIRUFEICsnLycgK1xyXG4gICAgICBzZWxlY3RlZEluQWN0aXZlQ29zdEhlYWRJZCArJy8nKyBBUEkuQUNUSVZFX1NUQVRVUyArICcvJyArIEFQSS5BQ1RJVkVfU1RBVFVTX1RSVUU7XHJcbiAgICBsZXQgYm9keSA9IHt9O1xyXG5cclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UucHV0QVBJKHVybCwgYm9keSk7XHJcbiAgfVxyXG5cclxuICBpbmFjdGl2YXRlUHJvamVjdENvc3RIZWFkKCBwcm9qZWN0SWQgOiBzdHJpbmcsIHNlbGVjdGVkSW5BY3RpdmVDb3N0SGVhZElkIDogbnVtYmVyKSB7XHJcbiAgICB2YXIgdXJsID0gQVBJLlBST0pFQ1QgKyAnLycgKyBwcm9qZWN0SWQgKyAnLycgKyBBUEkuQ09TVEhFQUQgKycvJyArXHJcbiAgICAgIHNlbGVjdGVkSW5BY3RpdmVDb3N0SGVhZElkICsnLycrIEFQSS5BQ1RJVkVfU1RBVFVTICsgJy8nICsgQVBJLkFDVElWRV9TVEFUVVNfRkFMU0U7XHJcbiAgICBsZXQgYm9keSA9IHt9O1xyXG5cclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UucHV0QVBJKHVybCwgYm9keSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbkFjdGl2ZUNhdGVnb3JpZXMocHJvamVjdElkIDogc3RyaW5nLCBidWlsZGluZ0lkIDogc3RyaW5nLCBjb3N0SGVhZElkIDogbnVtYmVyKSB7XHJcbiAgICB2YXIgdXJsID0gIEFQSS5QUk9KRUNUICsgJy8nICsgcHJvamVjdElkICsgJy8nICsgQVBJLkJVSUxESU5HICsgJy8nICsgYnVpbGRpbmdJZCArICcvJyArXHJcbiAgICAgIEFQSS5DT1NUSEVBRCArJy8nICsgY29zdEhlYWRJZCArICcvJyArIEFQSS5DQVRFR09SWUxJU1Q7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5nZXRBUEkodXJsKTtcclxuICB9XHJcblxyXG4gIC8vIFdvcmtJdGVtICBDUlVEIEFQSVxyXG4gIGRlYWN0aXZhdGVXb3JrSXRlbSggYmFzZVVybDogc3RyaW5nLCBjb3N0SGVhZElkIDogbnVtYmVyLCBzdWJDYXRlZ29yeUlkIDogbnVtYmVyLCB3b3JrSXRlbUlkIDogbnVtYmVyKSB7XHJcbiAgICB2YXIgdXJsID0gIGJhc2VVcmwgKycvJysgQVBJLkNPU1RIRUFEICsnLycrXHJcbiAgICAgIGNvc3RIZWFkSWQgKyAnLycrIEFQSS5DQVRFR09SWSArJy8nKyBzdWJDYXRlZ29yeUlkICsnLycgKyBBUEkuV09SS0lURU0gKyAnLycgKyB3b3JrSXRlbUlkICsnLycrXHJcbiAgICAgIEFQSS5BQ1RJVkVfU1RBVFVTICsnLycrIEFQSS5BQ1RJVkVfU1RBVFVTX0ZBTFNFO1xyXG4gICAgbGV0IGJvZHkgPSB7fTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwRGVsZWdhdGVTZXJ2aWNlLnB1dEFQSSh1cmwsIGJvZHkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5BY3RpdmVXb3JrSXRlbXMoIGJhc2VVcmw6IHN0cmluZywgY29zdEhlYWRJZCA6IG51bWJlciwgc3ViQ2F0ZWdvcnlJZCA6IG51bWJlcikge1xyXG4gICAgdmFyIHVybCA9IGJhc2VVcmwgKyAnLycgKyBBUEkuQ09TVEhFQUQrJy8nK1xyXG4gICAgICBjb3N0SGVhZElkICsgJy8nKyBBUEkuQ0FURUdPUlkgICsnLycrIHN1YkNhdGVnb3J5SWQgKycvJyArIEFQSS5XT1JLSVRFTSA7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5nZXRBUEkodXJsKTtcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlV29ya0l0ZW0oYmFzZVVybCA6IHN0cmluZywgY29zdEhlYWRJZCA6IG51bWJlciwgc3ViQ2F0ZWdvcnlJZCA6IG51bWJlciwgd29ya0l0ZW1JZCA6IG51bWJlcikge1xyXG4gICAgdmFyIHVybCA9ICBiYXNlVXJsICsnLycrIEFQSS5DT1NUSEVBRCArJy8nK1xyXG4gICAgICBjb3N0SGVhZElkICsgJy8nKyBBUEkuQ0FURUdPUlkgKycvJysgc3ViQ2F0ZWdvcnlJZCArJy8nICsgQVBJLldPUktJVEVNICsgJy8nICsgd29ya0l0ZW1JZCArJy8nK1xyXG4gICAgICBBUEkuQUNUSVZFX1NUQVRVUyArJy8nKyBBUEkuQUNUSVZFX1NUQVRVU19UUlVFO1xyXG4gICAgbGV0IGJvZHkgPSB7fTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwRGVsZWdhdGVTZXJ2aWNlLnB1dEFQSSh1cmwsIGJvZHkpO1xyXG4gIH1cclxuXHJcbiAgLy8gUXVhbnRpdHkgQVBJIChOb3QgaW4gdXNlKVxyXG4gIGdldFF1YW50aXR5KGNvc3RIZWFkTmFtZTphbnksY29zdEhlYWRJdGVtOmFueSkge1xyXG4gICAgdmFyIHVybCA9IEFQSS5QUk9KRUNUICsgJy8nICsgU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlLmdldFNlc3Npb25WYWx1ZShTZXNzaW9uU3RvcmFnZS5DVVJSRU5UX1BST0pFQ1RfSUQpK1xyXG4gICAgICAnLycrIEFQSS5CVUlMRElORyArICcvJyArU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlLmdldFNlc3Npb25WYWx1ZShTZXNzaW9uU3RvcmFnZS5DVVJSRU5UX0JVSUxESU5HKStcclxuICAgICAgJy8nICsgQVBJLlFVQU5USVRZICsgJy8nICsgY29zdEhlYWROYW1lICsgJy8nICsgQVBJLldPUktJVEVNICsgJy8nK2Nvc3RIZWFkSXRlbSA7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5nZXRBUEkodXJsKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVF1YW50aXR5SXRlbXMoIGJhc2VVcmw6IHN0cmluZywgY29zdEhlYWRJZCA6IG51bWJlciwgY2F0ZWdvcnlJZCA6IG51bWJlciwgd29ya0l0ZW1JZCA6IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5SXRlbXNBcnJheSA6IGFueSkge1xyXG4gICAgdmFyIGJvZHk9IHsgaXRlbSA6IHF1YW50aXR5SXRlbXNBcnJheSB9O1xyXG4gICAgdmFyIHVybCA9IGJhc2VVcmwgKyAnLycrIEFQSS5DT1NUSEVBRCArJy8nICsgY29zdEhlYWRJZCArXHJcbiAgICAgICcvJysgQVBJLkNBVEVHT1JZICsnLycrIGNhdGVnb3J5SWQgKycvJyArIEFQSS5XT1JLSVRFTSArICcvJyArIHdvcmtJdGVtSWQgKyAnLycrIEFQSS5RVUFOVElUWTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwRGVsZWdhdGVTZXJ2aWNlLnB1dEFQSSh1cmwsIGJvZHkpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRGlyZWN0UXVhbnRpdHlBbW91bnQoIGJhc2VVcmw6IHN0cmluZywgY29zdEhlYWRJZCA6IG51bWJlciwgY2F0ZWdvcnlJZCA6IG51bWJlciwgd29ya0l0ZW1JZCA6IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RRdWFudGl0eSA6IG51bWJlcikge1xyXG4gICAgdmFyIGJvZHk9IHsgZGlyZWN0UXVhbnRpdHkgOiBkaXJlY3RRdWFudGl0eSB9O1xyXG4gICAgdmFyIHVybCA9IGJhc2VVcmwgKyAnLycrIEFQSS5DT1NUSEVBRCArJy8nICsgY29zdEhlYWRJZCArXHJcbiAgICAgICcvJysgQVBJLkNBVEVHT1JZICsnLycrIGNhdGVnb3J5SWQgKycvJyArIEFQSS5XT1JLSVRFTSArICcvJyArIHdvcmtJdGVtSWQgKyAnLycrIEFQSS5ESVJFQ1QgKyAnLycrIEFQSS5RVUFOVElUWTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwRGVsZWdhdGVTZXJ2aWNlLnB1dEFQSSh1cmwsIGJvZHkpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlUXVhbnRpdHlEZXRhaWxzQnlOYW1lKCBiYXNlVXJsOiBzdHJpbmcsIGNvc3RIZWFkSWQgOiBudW1iZXIsIGNhdGVnb3J5SWQgOiBudW1iZXIsIHdvcmtJdGVtSWQgOiBudW1iZXIsIHF1YW50aXR5TmFtZTpzdHJpbmcpIHtcclxuICAgIHZhciBib2R5PSB7IGl0ZW06IHsgbmFtZSA6IHF1YW50aXR5TmFtZSB9IH07XHJcbiAgICB2YXIgdXJsID0gYmFzZVVybCArICcvJysgQVBJLkNPU1RIRUFEICsnLycgKyBjb3N0SGVhZElkICtcclxuICAgICAgJy8nKyBBUEkuQ0FURUdPUlkgKycvJysgY2F0ZWdvcnlJZCArJy8nICsgQVBJLldPUktJVEVNICsgJy8nICsgd29ya0l0ZW1JZCArICcvJysgQVBJLlFVQU5USVRZICsgJy8nICsgQVBJLklURU07XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5wdXRBUEkodXJsLCBib2R5KTtcclxuICB9XHJcblxyXG5cclxuICAvL1JhdGUgQVBJXHJcbiAgdXBkYXRlUmF0ZSggYmFzZVVybDogc3RyaW5nLCBjb3N0SGVhZElkIDogbnVtYmVyLGNhdGVnb3J5SWQgOiBudW1iZXIsIHdvcmtJdGVtSWQgOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgcmF0ZUl0ZW1zQXJyYXkgOiBSYXRlKSB7XHJcbiAgICB2YXIgYm9keT1yYXRlSXRlbXNBcnJheTtcclxuICAgIHZhciB1cmwgPSBiYXNlVXJsICsgJy8nICsgQVBJLlJBVEUgKyAnLycgKyBBUEkuQ09TVEhFQUQrICcvJyArXHJcbiAgICAgIGNvc3RIZWFkSWQgKyAnLycgKyBBUEkuQ0FURUdPUlkgKyAnLycgKyBjYXRlZ29yeUlkICsgJy8nICsgQVBJLldPUktJVEVNICsgJy8nICsgd29ya0l0ZW1JZCA7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5wdXRBUEkodXJsLCBib2R5KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZURpcmVjdFJhdGUoIGJhc2VVcmw6IHN0cmluZywgY29zdEhlYWRJZCA6IG51bWJlciwgY2F0ZWdvcnlJZCA6IG51bWJlciwgd29ya0l0ZW1JZCA6IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3RSYXRlIDogbnVtYmVyKSB7XHJcbiAgICB2YXIgYm9keT0geyBkaXJlY3RSYXRlIDogZGlyZWN0UmF0ZSB9O1xyXG4gICAgdmFyIHVybCA9IGJhc2VVcmwgKyAnLycrIEFQSS5DT1NUSEVBRCArJy8nICsgY29zdEhlYWRJZCArXHJcbiAgICAgICcvJysgQVBJLkNBVEVHT1JZICsnLycrIGNhdGVnb3J5SWQgKycvJyArIEFQSS5XT1JLSVRFTSArICcvJyArIHdvcmtJdGVtSWQgKyAnLycrIEFQSS5ESVJFQ1QgKyAnLycrIEFQSS5SQVRFO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UucHV0QVBJKHVybCwgYm9keSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0UmF0ZUl0ZW1zKCBwcm9qZWN0SWQgOiBTdHJpbmcsIGJ1aWxkaW5nSWQgOiBzdHJpbmcsIGNvc3RoZWFkSWQgOiBudW1iZXIsIGNhdGVnb3J5SWQgOiBudW1iZXIsIHdvcmtJdGVtSWQgOiBudW1iZXIpIHtcclxuICAgIHZhciB1cmwgPSBBUEkuUFJPSkVDVCArICcvJyArIHByb2plY3RJZCArICcvJyArIEFQSS5CVUlMRElORyArICcvJyArIGJ1aWxkaW5nSWQgKyAnLycgKyBBUEkuUkFURSArICcvJysgQVBJLkNPU1RIRUFEICsnLycgK1xyXG4gICAgICBjb3N0aGVhZElkICsgJy8nICsgQVBJLkNBVEVHT1JZICsgJy8nK2NhdGVnb3J5SWQgKyAnLycgKyBBUEkuV09SS0lURU0gKyAnLycrd29ya0l0ZW1JZCA7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cERlbGVnYXRlU2VydmljZS5nZXRBUEkodXJsKTtcclxuICB9XHJcblxyXG4gIC8vQ2F0ZWdvcnkgQVBJXHJcbiAgZ2V0Q2F0ZWdvcmllcyhiYXNlVXJsOiBzdHJpbmcsIGNvc3RIZWFkSWQgOiBudW1iZXIpIHtcclxuICAgIHZhciB1cmwgPSBiYXNlVXJsICsnLycrIEFQSS5DT1NUSEVBRCsgJy8nICsgY29zdEhlYWRJZCArICcvJyArIEFQSS5DQVRFR09SWTtcclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UuZ2V0QVBJKHVybCk7XHJcbiAgfVxyXG5cclxuICBnZXRDb3N0SGVhZERldGFpbHMoYmFzZVVybDogc3RyaW5nLCBjb3N0SGVhZElkIDogbnVtYmVyKSB7XHJcbiAgICB2YXIgdXJsID0gYmFzZVVybCArJy8nKyBBUEkuQ09TVEhFQUQrICcvJyArIGNvc3RIZWFkSWQ7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwRGVsZWdhdGVTZXJ2aWNlLmdldEFQSSh1cmwpO1xyXG4gIH1cclxuXHJcbiAgLy9HZXQgQWxsIFdvcmtJdGVtcyBPZiBDYXRlZ29yeVxyXG4gIGdldEFjdGl2ZVdvcmtJdGVtc09mQ2F0ZWdvcnkoYmFzZVVybDogc3RyaW5nLCBjb3N0SGVhZElkIDogbnVtYmVyLCBjYXRlZ29yeUlkIDogbnVtYmVyKSB7XHJcbiAgICB2YXIgdXJsID0gYmFzZVVybCArJy8nKyBBUEkuQ09TVEhFQUQrICcvJyArIGNvc3RIZWFkSWQgKyAnLycgKyBBUEkuQ0FURUdPUlkgKyAnLycgKyBjYXRlZ29yeUlkICsgJy8nICsgQVBJLldPUktJVEVNTElTVDtcclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UuZ2V0QVBJKHVybCk7XHJcbn1cclxuXHJcbiAgZ2V0UmF0ZUl0ZW1zQnlPcmlnaW5hbE5hbWUoYmFzZVVybDogc3RyaW5nLCBvcmlnaW5hbFJhdGVJdGVtTmFtZTpzdHJpbmcpIHtcclxuICAgIHZhciB1cmwgPSBiYXNlVXJsICsnLycrIEFQSS5SQVRFUysgJy8nICtBUEkuUkFURV9JVEVNICsgJy8nKyBvcmlnaW5hbFJhdGVJdGVtTmFtZTtcclxuICAgIHJldHVybiB0aGlzLmh0dHBEZWxlZ2F0ZVNlcnZpY2UuZ2V0QVBJKHVybCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==
