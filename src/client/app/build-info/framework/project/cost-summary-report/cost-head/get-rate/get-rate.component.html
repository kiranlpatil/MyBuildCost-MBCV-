<!--Edit enabled-->
<div *ngIf="rateItemsArray!==undefined" [ngClass]="(rateView == 'rate') ? 'get-rate-section' : ((rateView == 'cost') ? 'get-cost-section' : 'get-systemRA-section')">
  <div class="pull-left">
    <div class="pull-left" *ngIf="rateItemsArray!==undefined">
      <div class="pull-left quantity-label">
          {{getHeadings().QUANTITY}}
      </div>
      <div class="pull-left">
        <input [(ngModel)]="rateItemsArray.quantity" id="rateQuantity" type="number" class="form-control quantity-count"
               (change)="onTotalQuantityChange(rateItemsArray.quantity)"
               (focus)="getPreviousQuantity(rateItemsArray.quantity)"
               [disabled]="disableRateField"/>
      </div>
      <div class="pull-left">
        <span class="quantity-sqft">
          {{ rateItemsArray.unit }}
        </span>
      </div>
    </div>
  </div>
  <div class="col-sm-12 no-padding">
    <table class="get-rate-table">
      <thead>
        <tr>
          <th>{{getTableHeadings().DESCRIPTION}}</th>
          <th>{{getTableHeadings().QUANTITY}}</th>
          <th>{{getTableHeadings().UNIT}}</th>
          <th>{{getTableHeadings().RATE_PER_UNIT}}</th>
          <th>{{getTableHeadings().COST}}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let rateItem of rateItemsArray.rateItems | groupBy:'type'; let k = index">
          <td class="rate-item" colspan="5">
            <table>
              <thead>
                <tr>
                  <th colspan="5">{{(rateItem.key === 'M') ? 'Material' : ((rateItem.key === "L") ? "Labour" : "(Material + Labour)")}}</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of rateItem.value">
                  <td>
                    <input [(ngModel)]="item.item" id="itemDescription" class="form-control remark-input"
                           [disabled]="disableRateField"/>
                    <div class="remark-icon">
                      <img title="{{item.remarks}}" src="assets/build-info/dashboard/comment.png" width="16" height="16" />
                    </div>
                  </td>
                  <td>
                    <input type="number" [(ngModel)]="item.quantity" id="itemQuantity" class="form-control text-right"
                           (change)="calculateTotal()" [disabled]="disableRateField"/>
                  </td>
                  <td>
                    <input [(ngModel)]="item.unit" id="itemUnit" class="form-control text-right" [disabled]="disableRateField"/>
                  </td>
                  <td>
                    <input type="number" [(ngModel)]="item.rate" id="itemRate" class="form-control text-right"
                           (change)="calculateTotal()" [disabled]="disableRateField"/>
                  </td>
                  <td>
                    <input type="number" [(ngModel)]="item.totalAmount" id="totalAmount get-total-amount text-right" class="form-control clear" readonly/>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
      <tfoot>
      <tr>
        <td class="total-amount text-left">
          <label>{{getLabel().TOTAL}}</label>
        </td>
        <td class="total-amount" colspan="3">
        </td>
        <td class="total-amount">
          {{totalAmount}}
        </td>
      </tr>
      </tfoot>
    </table>
  </div>
  <table class="notes-table">
    <thead>
      <th>Notes</th>
      <th></th>
    </thead>
    <tbody>
      <tr>
        <td class="alignment-top">
          <textarea rows="4" cols="80" [(ngModel)]="rateItemsArray.notes" id="rateNotes" [disabled]="disableRateField">
            </textarea>
        </td>
        <td>
          <img id="rateImageURL" src="{{rateItemsArray.imageURL}}">
        </td>
      </tr>
    </tbody>
  </table>
  <button type="button" *ngIf="!disableRateField" class="save-btn" (click)="updateRate(rateItemsArray)">{{getButton().SAVE}}</button>

</div>


