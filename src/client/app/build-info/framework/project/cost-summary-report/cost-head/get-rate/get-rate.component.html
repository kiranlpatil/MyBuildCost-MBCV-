<div *ngIf="rateItemsArray!==undefined" class="get-rate-section">
  <div class="pull-left">
    <div class="pull-left" *ngIf="rateItemsArray!==undefined">
      <div class="pull-left quantity-label">
          Quantity
      </div>
      <div class="pull-left">
        <input [(ngModel)]="rateItemsArray.quantity" id="rateQuantity" type="number" class="form-control quantity-count"
               (change)="onTotalQuantityChange(rateItemsArray.quantity)"
               (focus)="getPreviousQuantity(rateItemsArray.quantity)"/>
      </div>
      <div class="pull-left">
        <span class="quantity-sqft">
          {{ rateItemsArray.unit }}
        </span>
      </div>
    </div>
  </div>
  <div class="">
    <table class="">
        <thead>
        <th>Description</th>
        <th>Qty.</th>
        <th>Unit</th>
        <th>Rate/Unit</th>
        <th>Amount</th>
        </thead>
        <tbody>
        <tr *ngFor="let rateItem of rateItemsArray.items | groupBy:'type'; let k = index">
          <td>
            <table>
              <thead>
              {{(rateItem.key === 'M') ? 'Material' : ((rateItem.key === "L") ? "Labour" : "(Material + Labour)")}}
              </thead>
              <tbody>
                    <tr *ngFor="let item of rateItem.value">
                      <td>
                        <input [(ngModel)]="item.item" id="itemDescription" class="form-control remark-input"/>
                        <div class="remark-icon">
                          <img title="{{item.remarks}}" src="assets/build-info/dashboard/comment.png" width="16" height="16" />
                        </div>
                      </td>
                      <td>
                        <input type="number" [(ngModel)]="item.quantity" id="itemQuantity" class="form-control text-right" (change)="changeQuantity(item.quantity,k)"/>
                      </td>
                      <td>
                        <input [(ngModel)]="item.unit" id="itemUnit" class="form-control text-right" (change)="changeQuantity(item.quantity,k)"/>
                      </td>
                      <td>
                        <input type="number" [(ngModel)]="item.rate" id="itemRate" class="form-control text-right" (change)="changeRate(item.rate,k)"/>
                      </td>
                      <td>
                        <input type="number" [(ngModel)]="item.quantity*item.rate" id="totalAmount get-total-amount text-right" class="form-control clear" readonly/>
                      </td>
                    </tr>
              </tbody>
            </table>
          </td>
        </tr>
        </tbody>
        <tfoot>
      <tr>
        <td class="total-amount text-left">
          <label>Total</label>
        </td>
        <td class="total-amount">
          {{totalQuantity|number}}
        </td>
        <td>
          &nbsp;
        </td>
        <td class="total-amount">
          {{totalRate|number}}
        </td>
        <td class="total-amount">
          {{totalAmount|number}}
        </td>
      </tr>
      </tfoot>
      </table>
    <button type="button" class="save-btn" (click)="updateRate(rateItemsArray)">Save</button>
  </div>
</div>
