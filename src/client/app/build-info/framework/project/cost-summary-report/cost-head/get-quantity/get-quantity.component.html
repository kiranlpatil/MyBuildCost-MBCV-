<div *ngIf="quantityItems!==undefined" class="get-quantity-section">
  <button *ngIf="innerView !== getLabel().WORKITEM_QUANTITY_TAB" title="Close" class="close" (click)="closeQuantityTab()">
    <img src="assets/framework/images/close/close-black.svg" />
  </button>
  <button *ngIf="innerView === getLabel().WORKITEM_QUANTITY_TAB" title="Close" class="close" (click)="closeInnerViewTab()">
    <img src="assets/framework/images/close/close-black.svg" />
  </button>
  <table class="table">
    <thead>
      <th>{{getTableHeadings().ITEM}}</th>
      <th>{{getTableHeadings().NUMBERS}}</th>
      <th [hidden]="!workItem.length">{{getTableHeadings().LENGTH}}</th>
      <th [hidden]="!workItem.breadthOrWidth">{{getTableHeadings().BREADTH}}</th>
      <th [hidden]="!workItem.height">{{getTableHeadings().HEIGHT}}</th>
      <th>{{getTableHeadings().QUANTITY}}</th>
      <th class="text-left">{{getTableHeadings().UNIT}}</th>
      <th class="hidden-xs">&nbsp;</th>
      <th class="hidden-xs">&nbsp;</th>
    </thead>
  <tbody>
  <tr *ngFor="let quantityItem of quantityItems;  let quantityIndex= index ">
    <td class="get-amount-value">
      <input [(ngModel)]="quantityItem.item" id="costitem"  class="form-control" [class.required-field]="quantityItem.item == ''"/>
    </td>
    <td  class="get-amount-value">
      <input type="number"  amountValidate="true"
             [class.validate-amount] = 'quantityItem?.nos?.toString().split(".")[0]?.length>7 ||
                                        quantityItem?.nos?.toString().split(".")[1]?.length>4  '
             [(ngModel)]="quantityItem.nos" id="numbers" (change)="getQuantityTotal(quantityItems)" class="form-control" required/>
    </td>
    <td class="get-amount-value" [hidden]="!workItem.length">
      <input type="number" *ngIf="workItem"  amountValidate="true"
             [class.validate-amount] = '(quantityItem?.length?.toString().indexOf("-")<0 && quantityItem?.length?.toString().split(".")[0]?.length>7) ||
                                        (quantityItem?.length?.toString().indexOf("-") ===0 && quantityItem?.length?.toString().split(".")[0]?.length>8 )||
                                        quantityItem?.length?.toString().split(".")[1]?.length>4 '
             [(ngModel)]="quantityItem.length" id="length" (change)="getQuantityTotal(quantityItems)" class="form-control" required/>
    </td>
    <td class="get-amount-value" [hidden]="!workItem.breadthOrWidth">
      <input  type="number" *ngIf="workItem"  amountValidate="true"
              [class.validate-amount] = '( quantityItem?.breadth?.toString().indexOf("-")<0 && quantityItem?.breadth?.toString().split(".")[0]?.length>7 )||
                                       (quantityItem?.breadth?.toString().indexOf("-") ===0 && quantityItem?.breadth?.toString().split(".")[0]?.length>8 )||
                                        quantityItem?.breadth?.toString().split(".")[1]?.length>4 '
              [(ngModel)]="quantityItem.breadth" id="breadth" (change)="getQuantityTotal(quantityItems)" class="form-control"/>
    </td>
    <td class="get-amount-value" [hidden]="!workItem.height">
      <input type="number" *ngIf="workItem"  amountValidate="true"
             [class.validate-amount] = '(quantityItem?.height?.toString().indexOf("-")<0 && quantityItem?.height?.toString().split(".")[0]?.length>7)||
                                        (quantityItem?.height?.toString().indexOf("-")===0 &&quantityItem?.height?.toString().split(".")[0]?.length>8 )||
                                        quantityItem?.height?.toString().split(".")[1]?.length>4 '
             [(ngModel)]="quantityItem.height" id="height" (change)="getQuantityTotal(quantityItems)" class="form-control" required/>
    </td>
    <td class="get-amount-value">
      <input  type="number" [(ngModel)]= "quantityItem.quantity"  id="qty" class="form-control" disabled/>
    </td>
    <td class="get-amount-value text-left get-unit">
      {{workItemUnit}}
    </td>
    <td colspan="2" class="get-amount-value get-delete text-center hidden-xs">
      <div class="col-xs-2">
      <span title="Delete Quantity Item" (click)="deleteQuantityItem(quantityIndex)" class="glyphicon glyphicon-trash"></span>
      </div>
    </td>
  </tr>
  <tr class="total-amt-row">
    <td class="total-amount text-center">
      <span>{{getTableHeadings().TOTAL}}</span>
    </td>
    <td class="total-amount text-right">

    </td>
    <td class="total-amount text-right" [hidden]="!workItem.length">

    </td>
    <td class="total-amount text-right" [hidden]="!workItem.breadthOrWidth">

    </td>
    <td class="total-amount text-right" [hidden]="!workItem.height">

    </td>
    <td class="total-amount text-right">
      <span> {{quantityTotal|number}} </span>
    </td>
    <td class="total-amount text-left">
      {{workItemUnit}}
    </td>
    <td colspan="2" class="total-amount hidden-xs">
      &nbsp;
    </td>
  </tr>
  </tbody>
  </table>

  <button title="Add Row" type="button" class="add-new-btn hidden-xs" (click)="addQuantityItem()">+ {{getButton().ADD}} {{getButton().ROW}}</button>
  <button title="Save" type="submit" class="save-btn hidden-xs" (click)="updateQuantityItem(quantityItems)">{{getButton().SAVE}}</button>
  <button title="Cancel" *ngIf="innerView !== getLabel().WORKITEM_QUANTITY_TAB" class="cancel hidden-xs" (click)="closeQuantityTab()">{{getButton().CANCEL_BUTTON}}</button>
  <button title="Cancel" *ngIf="innerView === getLabel().WORKITEM_QUANTITY_TAB" class="cancel hidden-xs" (click)="closeInnerViewTab()">{{getButton().CANCEL_BUTTON}}</button>
</div>

<div class="modal fade" id="deleteQuantity" role="dialog">
  <bi-delete-confirmation-modal [elementType]="deleteConfirmationQuantityItem" (deleteElementEvent)="deleteElement($event)"></bi-delete-confirmation-modal>
</div>
